#正常情况下的生命周期
1. onCreate：这是Activity生命周期的第一个方法，表示Activity正在被创建，可以在这个方法里做一些初始化工作；
2. onStart：表示Activity正在被启动，此时Activity已经可见了，但是还没有出现在前台，还无法和用户交互，在该方法里直接执行finish()方法，会在执行完onStart后直接执行onStop和onDestroy；
3. onResume：表示Activity已经可见了，并且出现在前台(可以和用户交互了)；
4. onPause：表示Activity正在停止(执行完该方法后，当前Activity将不再处于前台(不能直接与用户交互)但仍然可见)，当在当前Activity的基础上启动了一个新的非全尺寸或者透明的Activity时(例如：Theme为`Theme.AppCompat.Dialog.Alert`的活动)，该生命周期的回调方法会被执行，暂停状态的活动是完全活着的(它维持所有状态和成员信息，并保持附加到窗口管理器)，但是在极低内存下可能会被系统杀死，因此可以在这里做一些存储数据、停止动画，将未保存的更改提交给持久数据等工作，但是不能太耗时，因为会影响到新Activity界面的显示(先执行完旧Activity的onPause方法，才会执行新Activity的onResume方法)；
5. onStop：表示Activity即将停止(执行完该方法后Activity处于不可见状态)，此时仍然保留着所有状态和成员信息，因为在执行此方法时，被启动的Activity的onResume方法已经执行完毕(界面已经显示出来)，所以可以做一些稍微重量级的回收工作，但是最好不要太耗时，当其他地方需要内存时，处在该状态的Activity通常会被系统杀死；
6. onDestory：表示Activity即将被销毁，在这里可以做一些回收和资源释放工作；
7. onRestart：表示Activity正在重新启动，一般情况下从不可见状态变为可见状态时，onRestart就会被调用。
![](http://oqnfoupsj.bkt.clouddn.com/17-7-10/71526340.jpg)
当使用startActivityForResult()方法启动的Activity在运行的过程中突然Crash掉了，那么会在父Activity中接收到一个值为RESULT_CANCELED的resultCode
#异常情况下的生命周期分析
##情况1：资源相关配置发生改变导致Activity被销毁重建
在默认情况下，当系统配置发生变化后，Activity就会被销毁重建，在销毁之前(确切的说是onStop之前)，会调用onSaveInstanceState(这个方法只会在Activity被异常终止的情况下调用)来保存当前Activity的状态，在Activity被重新创建之后，会将onSaveInstanceState方法里保存的Bundle对象作为参数传递给onCreate和onRestoreInstanceState(通常在onStart方法之后调用)方法进行数据的恢复。
只要onRestoreInstanceState被调用则其参数就肯定不为空，官方推荐使用这种方式来进行数据恢复。
针对onSaveInstanceState方法需要注意的是，系统只会在Activity即将被销毁并且有机会重新显示的情况下才会去调用。
当Activity在异常情况下需要重新创建时，系统会默认为我们保存当前Activity的视图结构，并且在Activity重启后为我们恢复这些数据。
如果不想让Activity在屏幕旋转时重新创建可以给configChanges属性添加orientation这个值，如果想指定多个值，可以用"|"连接起来
###系统保存和恢复View层次结构的工作流程
首先Activity被意外终止时，Activity会调用onSaveInstanceState去保存数据，然后Activity会委托Window去保存数据，接着Window再委托它上面的顶级容器去保存数据，顶层容器是一个ViewGroup(一般来说很可能是DecorView)，最后顶层容器再去一一通知它的子元素来保存数据，这样整个数据保存过程就完成了。
##情况2：资源不足导致低优先级的Activity被杀死
###Activity的优先级
1.前台Activity：正在和用户交互的Activity<br>
2.可见但非前台Activity：例如Activity中弹出了一个对话框<br>
3.后台Activity<br>
当系统内存不足时，系统就会按照上述优先级去杀死Activity所在的进程，如果需要在后台进行一些长期的工作避免被系统杀死，比较好的方法是，将后台工作放入Service中，从而保证进程有一定的优先级，不会轻易被系统杀死。 


